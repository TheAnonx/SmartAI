<Window x:Class="SmartAI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="SmartAI - Sistema Cognitivo Epistêmico" 
        Height="700" 
        Width="1200"
        Background="#1E1E1E"
        WindowStartupLocation="CenterScreen"
        MinHeight="600"
        MinWidth="900">

    <Window.Resources>
        <!-- Estilos -->
        <Style x:Key="ModernButton" TargetType="Button">
            <Setter Property="Background" Value="#007ACC"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="15,8"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="6"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#1E88E5"/>
                </Trigger>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter Property="Background" Value="#555555"/>
                    <Setter Property="Foreground" Value="#999999"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="SecondaryButton" TargetType="Button">
            <Setter Property="Background" Value="#2D2D30"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="12,6"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="4"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#3E3E42"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="MenuItemStyle" TargetType="MenuItem">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Background" Value="#252526"/>
            <Setter Property="Padding" Value="10,5"/>
        </Style>
    </Window.Resources>

    <DockPanel>
        <!-- Menu Superior -->
        <Menu DockPanel.Dock="Top" Background="#252526" Height="30">
            <MenuItem Header="Arquivo" Style="{StaticResource MenuItemStyle}">
                <MenuItem Header="Limpar Conversa" Click="ClearChat_Click"/>
                <Separator/>
                <MenuItem Header="Sair" Click="Exit_Click"/>
            </MenuItem>

            <MenuItem Header="Ferramentas" Style="{StaticResource MenuItemStyle}">
                <MenuItem Header="🧪 Executar Testes do Sistema" Click="RunTests_Click"/>
                <MenuItem Header="📊 Estatísticas" Click="ShowStats_Click"/>
                <MenuItem Header="⚠️ Verificar Conflitos" Click="CheckConflicts_Click"/>
                <Separator/>
                <MenuItem Header="🔍 Buscar na Web" Click="WebSearch_Click"/>
            </MenuItem>

            <MenuItem Header="Conhecimento" Style="{StaticResource MenuItemStyle}">
                <MenuItem Header="📚 Fatos Validados" Click="ShowValidatedFacts_Click"/>
                <MenuItem Header="⏳ Fatos Candidatos" Click="ShowCandidateFacts_Click"/>
                <MenuItem Header="🗂️ Histórico de Aprendizado" Click="ShowLearningHistory_Click"/>
            </MenuItem>

            <MenuItem Header="Ajuda" Style="{StaticResource MenuItemStyle}">
                <MenuItem Header="ℹ️ Sobre o Sistema Epistêmico" Click="About_Click"/>
                <MenuItem Header="📖 Comandos Disponíveis" Click="ShowCommands_Click"/>
            </MenuItem>
        </Menu>

        <!-- Barra de Status -->
        <Border DockPanel.Dock="Bottom" 
                Background="#007ACC" 
                Height="28"
                Padding="10,0">
            <Grid>
                <TextBlock x:Name="StatusText" 
                           Text="Sistema Pronto" 
                           Foreground="White"
                           VerticalAlignment="Center"
                           FontSize="12"/>

                <StackPanel Orientation="Horizontal" 
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center">
                    <TextBlock x:Name="ModeIndicator" 
                               Text="Modo: ANSWER" 
                               Foreground="White"
                               FontSize="11"
                               Margin="0,0,15,0"/>

                    <TextBlock x:Name="FactCount" 
                               Text="Fatos: 0" 
                               Foreground="White"
                               FontSize="11"
                               Margin="0,0,15,0"/>

                    <TextBlock x:Name="ConflictIndicator" 
                               Text="Conflitos: 0" 
                               Foreground="#FFEB3B"
                               FontSize="11"
                               FontWeight="Bold"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Área Principal -->
        <Grid Margin="0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="300"/>
            </Grid.ColumnDefinitions>

            <!-- Área de Chat -->
            <Grid Grid.Column="0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="60"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Header -->
                <Border Grid.Row="0" Background="#252526" Padding="20,0">
                    <StackPanel VerticalAlignment="Center">
                        <TextBlock Text="💬 Conversa" 
                                   FontSize="20" 
                                   FontWeight="Bold" 
                                   Foreground="#4EC9B0"/>
                        <TextBlock Text="Sistema cognitivo com validação epistêmica" 
                                   FontSize="11" 
                                   Foreground="#888888"/>
                    </StackPanel>
                </Border>

                <!-- Chat Messages -->
                <Border Grid.Row="1" 
                        Background="#1E1E1E" 
                        Margin="10">
                    <ScrollViewer x:Name="ChatScrollViewer" 
                                  VerticalScrollBarVisibility="Auto"
                                  Padding="10">
                        <StackPanel x:Name="ChatPanel"/>
                    </ScrollViewer>
                </Border>

                <!-- Input Area -->
                <Border Grid.Row="2" 
                        Background="#252526" 
                        Padding="15"
                        BorderBrush="#3F3F46"
                        BorderThickness="0,1,0,0">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <TextBox x:Name="InputTextBox"
                                 Grid.Column="0"
                                 Background="#3C3C3C"
                                 Foreground="White"
                                 BorderBrush="#007ACC"
                                 BorderThickness="2"
                                 Padding="12"
                                 FontSize="14"
                                 VerticalContentAlignment="Center"
                                 TextWrapping="Wrap"
                                 MaxHeight="100"
                                 KeyDown="InputTextBox_KeyDown"
                                 AcceptsReturn="False"/>

                        <Button x:Name="SendButton"
                                Grid.Column="1"
                                Content="Enviar"
                                Style="{StaticResource ModernButton}"
                                Width="100"
                                Height="45"
                                Margin="10,0,0,0"
                                Click="SendButton_Click"/>
                    </Grid>
                </Border>
            </Grid>

            <!-- Painel Lateral -->
            <Border Grid.Column="1" 
                    Background="#252526" 
                    BorderBrush="#3F3F46"
                    BorderThickness="1,0,0,0"
                    Padding="15">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <!-- Quick Actions -->
                        <TextBlock Text="⚡ Ações Rápidas" 
                                   FontSize="16" 
                                   FontWeight="Bold" 
                                   Foreground="#4EC9B0"
                                   Margin="0,0,0,10"/>

                        <Button Content="🔍 Buscar na Web" 
                                Style="{StaticResource SecondaryButton}"
                                Margin="0,0,0,8"
                                Click="WebSearch_Click"
                                HorizontalAlignment="Stretch"/>

                        <Button Content="⚠️ Verificar Conflitos" 
                                Style="{StaticResource SecondaryButton}"
                                Margin="0,0,0,8"
                                Click="CheckConflicts_Click"
                                HorizontalAlignment="Stretch"/>

                        <Button Content="📊 Ver Estatísticas" 
                                Style="{StaticResource SecondaryButton}"
                                Margin="0,0,0,8"
                                Click="ShowStats_Click"
                                HorizontalAlignment="Stretch"/>

                        <Button Content="🧪 Executar Testes" 
                                Style="{StaticResource SecondaryButton}"
                                Margin="0,0,0,20"
                                Click="RunTests_Click"
                                HorizontalAlignment="Stretch"/>

                        <!-- Recent Learning -->
                        <TextBlock Text="📚 Aprendizado Recente" 
                                   FontSize="14" 
                                   FontWeight="Bold" 
                                   Foreground="#9CDCFE"
                                   Margin="0,10,0,10"/>

                        <Border Background="#1E1E1E" 
                                CornerRadius="6" 
                                Padding="10"
                                Margin="0,0,0,20">
                            <StackPanel x:Name="RecentLearningPanel">
                                <TextBlock Text="Nenhum aprendizado recente" 
                                           Foreground="#888888"
                                           FontSize="12"
                                           TextWrapping="Wrap"/>
                            </StackPanel>
                        </Border>

                        <!-- System Info -->
                        <TextBlock Text="ℹ️ Informações do Sistema" 
                                   FontSize="14" 
                                   FontWeight="Bold" 
                                   Foreground="#9CDCFE"
                                   Margin="0,10,0,10"/>

                        <Border Background="#1E1E1E" 
                                CornerRadius="6" 
                                Padding="10">
                            <StackPanel>
                                <TextBlock Foreground="#CCCCCC" FontSize="11" Margin="0,0,0,5">
                                    <Run Text="Modo Cognitivo:"/>
                                    <Run x:Name="CurrentModeText" Text="ANSWER" FontWeight="Bold" Foreground="#4EC9B0"/>
                                </TextBlock>

                                <TextBlock Foreground="#CCCCCC" FontSize="11" Margin="0,0,0,5">
                                    <Run Text="Fatos Validados:"/>
                                    <Run x:Name="ValidatedFactsCountText" Text="0" FontWeight="Bold" Foreground="#4CAF50"/>
                                </TextBlock>

                                <TextBlock Foreground="#CCCCCC" FontSize="11" Margin="0,0,0,5">
                                    <Run Text="Candidatos:"/>
                                    <Run x:Name="CandidatesCountText" Text="0" FontWeight="Bold" Foreground="#FFA726"/>
                                </TextBlock>

                                <TextBlock Foreground="#CCCCCC" FontSize="11">
                                    <Run Text="Conflitos:"/>
                                    <Run x:Name="ConflictsCountText" Text="0" FontWeight="Bold" Foreground="#F44336"/>
                                </TextBlock>
                            </StackPanel>
                        </Border>

                        <!-- Commands Help -->
                        <TextBlock Text="💡 Comandos Especiais" 
                                   FontSize="14" 
                                   FontWeight="Bold" 
                                   Foreground="#9CDCFE"
                                   Margin="0,20,0,10"/>

                        <Border Background="#1E1E1E" 
                                CornerRadius="6" 
                                Padding="10">
                            <TextBlock Foreground="#CCCCCC" 
                                       FontSize="11" 
                                       TextWrapping="Wrap"
                                       LineHeight="18">
                                <Run Text="• " Foreground="#4EC9B0"/>
                                <Run Text="verificar conflitos" FontFamily="Consolas"/>
                                <LineBreak/>
                                <Run Text="• " Foreground="#4EC9B0"/>
                                <Run Text="estatísticas" FontFamily="Consolas"/>
                                <LineBreak/>
                                <Run Text="• " Foreground="#4EC9B0"/>
                                <Run Text="aprender: [fato]" FontFamily="Consolas"/>
                                <LineBreak/>
                                <Run Text="• " Foreground="#4EC9B0"/>
                                <Run Text="pesquisar: [termo]" FontFamily="Consolas"/>
                            </TextBlock>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </Border>
        </Grid>
    </DockPanel>
</Window>